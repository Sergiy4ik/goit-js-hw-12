{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst API_KEY = '52796639-16b0da086bf021f69585a6f18';\n\nconst URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1) {\n    try {\n        const response = await axios.get(URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 16,\n                page\n            },\n        })\n\n        return response.data\n    } catch (error) {\n        console.error('Pixabay API error:', error);\n        throw error;\n    }\n}","import { refs } from '../main';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images, append = false) {\n  const markup = images.map(item => `\n    <li class=\"gallery-list-item\">\n      <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n        <img class=\"gallery-list-img\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" width=\"360\" height=\"200\">\n      </a>\n      <div class=\"gallery-list-container\">\n        <div class=\"subtitle-container\">\n          <h2 class=\"gallery-list-subtitle\">likes</h2>\n          <p class=\"subtitle-p\">${item.likes}</p>\n        </div>\n        <div class=\"subtitle-container\">\n          <h2 class=\"gallery-list-subtitle\">views</h2>\n          <p class=\"subtitle-p\">${item.views}</p>\n        </div>\n        <div class=\"subtitle-container\">\n          <h2 class=\"gallery-list-subtitle\">comments</h2>\n          <p class=\"subtitle-p\">${item.comments}</p>\n        </div>\n        <div class=\"subtitle-container\">\n          <h2 class=\"gallery-list-subtitle\">downloads</h2>\n          <p class=\"subtitle-p\">${item.downloads}</p>\n        </div>\n      </div>\n    </li>`).join('');\n\n  if (append) {\n    refs.gallery.innerHTML += markup;\n  } else {\n    refs.gallery.innerHTML = markup;\n  }\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  refs.loader.classList.remove(\"hidden\")\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add(\"hidden\")\n}\n\nexport function showMoreBtn() {\n  refs.loadMore.classList.remove(\"hidden\")\n}\n\nexport function hideMoreBtn() {\n  refs.loadMore.classList.add(\"hidden\")\n}","import { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery, clearGallery, showLoader, hideLoader, hideMoreBtn, showMoreBtn } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const refs = {\n    form: document.querySelector('.form'),\n    input: document.querySelector('input[name=\"search-text\"]'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMore: document.querySelector('.load-more-btn')\n};\n\nlet page = 1;\nlet totalPages = 0;\nlet queryGlobal = '';\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.loadMore.addEventListener('click', onLoadMoreClick)\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n    const query = refs.input.value.trim();\n    if (!query) {\n        iziToast.warning({\n            message: 'Please enter a search term!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    queryGlobal = query;\n    page = 1;\n\n    hideMoreBtn();\n    clearGallery();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(queryGlobal, page);\n\n        if (!data.hits.length) {\n            iziToast.error({\n                message: 'Sorry, no images found. Try again!',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n        totalPages = Math.ceil(data.totalHits / 16)\n\n        if (page < totalPages) {\n            showMoreBtn()\n        }\n\n    } catch (error) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again!',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader()\n    }\n}\n\nasync function onLoadMoreClick() {\n    page++\n    showLoader()\n\n    try {\n        const data = await getImagesByQuery(queryGlobal, page)\n        createGallery(data.hits, true)\n\n        if (page >= totalPages) {\n            hideMoreBtn()\n            iziToast.warning({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again!',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader()\n    }\n\n    const { height: cardHeight } = refs.gallery\n        .firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n"],"names":["API_KEY","URL","getImagesByQuery","query","page","axios","error","lightbox","SimpleLightbox","createGallery","images","append","markup","item","refs","clearGallery","showLoader","hideLoader","showMoreBtn","hideMoreBtn","totalPages","queryGlobal","handleSubmit","onLoadMoreClick","event","iziToast","data","cardHeight"],"mappings":"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"}